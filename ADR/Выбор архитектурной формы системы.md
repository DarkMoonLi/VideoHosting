**Дата:** 20 сентября 2023 г.

**Статус:** Принято

**Контекст:**

При разработке платформы видео хостинга мы стоим перед выбором архитектурной формы системы. Нам необходимо учесть масштабируемость, надежность, скорость разработки и возможность быстро вносить изменения.

**Рассмотренные варианты:**

1. **Модульный монолит:** Одно приложение, разделенное на модули, каждый из которых отвечает за определенную функциональность.
2. **Микросервисы:** Разделение системы на независимые сервисы, которые взаимодействуют между собой посредством API.
3. **Серверлесс:** Архитектура, при которой разработчикам не требуется управлять серверами, а код выполняется в ответ на события.

**Решение:**

Выбраны микросервисы.

**Обоснование:**

- **Повышение показателей доступности и отказоустойчивости:** При поломке упадет только один участок, а не все приложение.
- **Гибкость:** Микросервисы могут быть разработаны, развернуты и масштабированы независимо друг от друга. Это позволяет упростить и ускорить процесс разработки и обновления приложения
- **Отказоустойчивость:** Если один из микросервисов перестает работать, остальные продолжают функционировать нормально. Это улучшает надежность системы в целом и уменьшает риск простоя приложения
- **Масштабируемость:** Микросервисная архитектура позволяет масштабировать отдельные сервисы по требованию, что повышает производительность и обеспечивает более эффективное использование ресурсов
- **Легкость внедрения новых технологий:** Поскольку каждый микросервис может быть разработан и развернут независимо, внедрение новых технологий или языков программирования становится проще и менее рискованным.
- **Удобство тестирования:** Микросервисы могут быть протестированы отдельно, что упрощает обнаружение и исправление ошибок. Это также позволяет проводить более быстрые и эффективные тестирования при обновлении приложения.

**Недостатки решения:**

- **Управление сложностью:** Микросервисная архитектура может привести к увеличению сложности в разработке и поддержке приложения. Каждый микросервис имеет свою собственную логику и базу данных, что требует дополнительных усилий для координации и управления.
- **Обеспечение согласованности данных:** При использовании микросервисов возникает проблема с согласованием данных между различными сервисами. Необходимо разработать механизмы синхронизации данных для обеспечения целостности и консистентности информации.
- **Отслеживание и мониторинг:** При наличии большого количества микросервисов становится сложно отследить и мониторить их работу. Необходимо использовать специальные инструменты для отслеживания состояния сервисов и выявления проблем в реальном времени.
- **Управление зависимостями:** Микросервисы могут иметь сложные взаимозависимости друг с другом. При изменении одного сервиса может потребоваться внесение изменений во все связанные сервисы. Это может привести к сложностям в управлении и обновлении системы.

**Последствия:**

- Необходимо разделить микросервисы с помощью систем управления потоковыми данными (Kafka), упростите коммуникацию между сервисами посредством сервисной сетки(Istio).
- Следует регулярно рефакторить код, чтобы избежать его усложнения.